{% extends 'base.html.twig' %}

{% block title %}Hello FacturaController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>



{% if filasFacturas is defined %}
    <section class="p-3">
        <div class="row table-responsive">
            <div class="col-12 mb-3 mt-4">
                <h2 class="text-center">Lista Facturas</h2>
            </div>
            <div class="col-12">
                <table class="table table-striped table-hover mt-3 text-center table-bordered">
                    <thead>
                        <tr>
                            <th>Total</th>
                            <th>Estado de pago</th>
                            <th>Fecha Emision</th>
                        </tr>
                    </thead>
                    <tbody>
                    
                            {% for facturas in filasFacturas %}

                             {% if facturas.estadoPago %}
                                {% set estadoPago = 'Si esta pagado' %}
                                {% else %}
                                {% set estadoPago = 'No esta pagado' %}
                            {% endif %} 
                                <tr>
                                    <td>{{ facturas.total }}</td>
                                    <td>{{ estadoPago }}</td>
                                    <td>{{ facturas.fechaEmision|date('Y-m-d') }}</td>
                                </tr>
                            {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </section>
{% endif %}

{% if filasFacturasFiltrado is defined %}
    <section class="p-3">
        <div class="row table-responsive">
            <div class="col-12 mb-3 mt-4">
                {% for e in empleado %}
                    <h2 class="text-center">Lista Facturas de {{ e.nombre }} {{ e.apellido }}</h2>
                {% endfor %}
            </div>
            <div class="col-12">
                <table class="table table-striped table-hover mt-3 text-center table-bordered">
                    <thead>
                        <tr>
                            <th>Total</th>
                            <th>Estado de pago</th>
                            <th>Fecha Emision</th>
                        </tr>
                    </thead>
                    <tbody>
                    
                            {% for facturas in filasFacturasFiltrado %}

                             {% if facturas.estadoPago %}
                                {% set estadoPago = 'Si esta pagado' %}
                                {% else %}
                                {% set estadoPago = 'No esta pagado' %}
                            {% endif %} 
                                <tr>
                                    <td>{{ facturas.total }}</td>
                                    <td>{{ estadoPago }}</td>
                                    <td>{{ facturas.fechaEmision|date('Y-m-d') }}</td>
                                </tr>
                            {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </section>
{% endif %}

{% if formulario is defined %}

    <section class="w-50 p-3 m-3">
        {{ form_start(formulario) }}
            {{ form_widget(formulario) }}
        {{ form_end(formulario) }}
    </section>
{% endif %}
{% endblock %}
